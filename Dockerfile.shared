FROM golang:1.19.1-alpine3.16 as proto
RUN apk add --no-cache make protobuf python3
WORKDIR /src
COPY . .
RUN make proto

FROM alpine:3.8
WORKDIR /src
COPY --from=proto /src/protobuf /src/protobuf
